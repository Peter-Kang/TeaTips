<people-hours total-hours="0" total-tips="">
  <link
    rel="stylesheet"
    href="https://unpkg.com/open-props/normalize.dark.min.css"
  />
  <link rel="stylesheet" href="https://unpkg.com/open-props/buttons.min.css" />
  <link rel="stylesheet" href="https://unpkg.com/open-props" />
  <style>
    h2 {
      margin: auto;
      margin-top: 0.5em;
    }
    button {
      color: white;
      --_border: var(--yellow-8);
    }
    button:hover {
      color: var(--yellow-8);
    }
  </style>
  <label> $</label>
  <input
    tl-controlled
    tl-trigger="input"
    tl-hostattr="total-tips"
    id="totalTips"
    type="number"
    step="0.01"
    placeholder="Total Tips"
  />

  <section hours>
    <hours-row></hours-row>
  </section>
  <button onclick="AddPerson(this)">Add a Person</button>

  <script tl-effect>
    //listen for hours-updated event
    this.addEventListener("hours-updated", () => {
      let totalHours = 0;
      this.shadowRoot.querySelectorAll("hours-row").forEach((h) => {
        const hours = parseFloat(h.getAttribute("hours"));
        if (hours && hours > 0) {
          totalHours += hours;
        }
      });
      this.setAttribute("total-hours", totalHours);
    });
  </script>
</people-hours>
